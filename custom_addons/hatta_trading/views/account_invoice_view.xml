<?xml version="1.0" encoding="UTF-8" ?>

<odoo>

    <record id="custom_account_invoice_inherit_form" model="ir.ui.view">
        <field name="name">account.invoice.form.inherit</field>
        <field name="model">account.invoice</field>
        <field name="inherit_id" ref="account.invoice_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="cost_center_id" domain="[('tag_type', '=', 'cost_center')]" context="{'default_tag_type': 'cost_center'}">
                    <form>
                        <group col="4">
                            <field name="name"/>
                            <field name="code"/>
                        </group>
                    </form>
                </field>
                <field name="job_account" domain="[('is_job_code', '=', True)]"
                                   context="{'default_is_job_code': True}"/>
                <field name="enquiry_id" invisible="1"/>
            </xpath>
            <xpath expr="//sheet/group[1]/group[2]/div" position="after">
                <field name="is_same_currency" invisible="1"/>
                    <field name="exchange_rate"
                           attrs="{'invisible':[('is_same_currency', '=', True)]}"
                           widget="exchange_rate_changer"
                           options="{'currency': 'currency_id'}"/>
            </xpath>

            <xpath expr="//field[@name='user_id']" position="after">
                <field name="purchase_order_id"/>
            </xpath>
            <xpath expr="//field[@name='partner_bank_id']" position="attributes">
                   <attribute name="invisible">0</attribute>
            </xpath>
            <xpath expr="//field[@name='invoice_line_ids']//field[@name='product_id']" position="before">
                <field name="serial_no"/>
            </xpath>
            <xpath expr="//field[@name='invoice_line_ids']//field[@name='invoice_line_tax_ids']" position="after">
                <field name="line_tax_amount"/>
            </xpath>
            <xpath expr="//field[@name='amount_untaxed']" position="attributes">
                   <attribute name="string">Amount(VAT Excluded)</attribute>
            </xpath>
            <xpath expr="//field[@name='amount_tax']" position="attributes">
                   <attribute name="string">VAT</attribute>
            </xpath>
            <xpath expr="//field[@name='amount_total']" position="attributes">
                   <attribute name="string">Amount(VAT Included)</attribute>
            </xpath>
            <xpath expr="//field[@name='invoice_line_ids']/tree" position="inside">
                <field name="enquiry_id" invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='invoice_line_ids']//field[@name='account_analytic_id']" position="attributes">
                <attribute name="attrs">{'readonly': [('enquiry_id', '!=', False)]}</attribute>
            </xpath>
        </field>
    </record>

    <record id="hatta_invoice_supplier_form" model="ir.ui.view">
        <field name="name">hatta.invoice.supplier.form</field>
        <field name="model">account.invoice</field>
        <field name="inherit_id" ref="account.invoice_supplier_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="cost_center_id" domain="[('tag_type', '=', 'cost_center')]" context="{'default_tag_type': 'cost_center'}">
                    <form>
                        <group col="4">
                            <field name="name"/>
                            <field name="code"/>
                        </group>
                    </form>
                </field>
                <field name="job_account" domain="[('is_job_code', '=', True)]"
                                   context="{'default_is_job_code': True}"/>
                <field name="enquiry_id" invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='currency_id']" position="after">
                <field name="is_same_currency" invisible="1"/>
                    <field name="exchange_rate" string="Exchange Rate (Local to VC)"
                           widget="exchange_rate_changer"
                           attrs="{'invisible':[('is_same_currency', '=', True)]}"
                           options="{'currency': 'currency_id'}"/>
            </xpath>
            <xpath expr="//field[@name='amount_untaxed']" position="attributes">
                   <attribute name="string">Amount(VAT Excluded)</attribute>
            </xpath>
            <xpath expr="//field[@name='amount_tax']" position="attributes">
                   <attribute name="string">VAT</attribute>
            </xpath>
            <xpath expr="//field[@name='amount_total']" position="attributes">
                   <attribute name="string">Amount(VAT Included)</attribute>
            </xpath>
            <xpath expr="//field[@name='invoice_line_ids']/tree" position="inside">
                <field name="enquiry_id" invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='invoice_line_ids']//field[@name='account_analytic_id']" position="attributes">
                <attribute name="attrs">{'readonly': [('enquiry_id', '!=', False)]}</attribute>
            </xpath>
            <xpath expr="//field[@name='partner_bank_id']" position="attributes">
                   <attribute name="invisible">0</attribute>
            </xpath>
        </field>
    </record>

    <record id="sale_account_invoice_inherit_form" model="ir.ui.view">
        <field name="name">sale.account.invoice.form.inherit</field>
        <field name="model">account.invoice</field>
        <field name="inherit_id" ref="sale.account_invoice_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='team_id']" position="after">
                <field name="sale_order_id"/>
            </xpath>
        </field>
    </record>

    <record id="invoice_supplier_debit_form" model="ir.ui.view">
        <field name="name">account.invoice.supplier.form.debit</field>
        <field name="model">account.invoice</field>
        <field name="priority">20</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="action_invoice_open" type="object" states="draft,proforma2" string="Validate" class="oe_highlight" groups="account.group_account_invoice"/>
                    <!--<button name="%(account.action_account_invoice_payment)d" type="action" states="open" string="Register Payment" groups="account.group_account_invoice" class="oe_highlight"/>-->
                    <field name="state" widget="statusbar" invisible="1" />
                </header>
                <sheet>
                    <group>
                        <group>
                            <field string="Vendor" name="partner_id"
                                   context="{'default_customer': 0, 'search_default_supplier': 1, 'default_supplier': 1}"
                                   domain="[('supplier', '=', True)]"/>
                            <field name="cost_center_id" domain="[('tag_type', '=', 'cost_center')]" context="{'default_tag_type': 'cost_center'}">
                                <form>
                                    <group col="4">
                                        <field name="name"/>
                                        <field name="code"/>
                                    </group>
                                </form>
                            </field>
                            <field name="credit_debit_account" required="1" domain="[('company_id', '=', company_id),('internal_type','=','other')]"/>
                            <field name="credit_debit_amount" required="1"/>
                            <field name="credit_debit_tax_ids" widget="many2many_tags"
                                   domain="[('type_tax_use','=','purchase'),('company_id', '=', company_id)]" options="{'no_create': True}"/>
                            <field name="credit_debit_type" invisible="1"/>
                        </group>
                        <group>
                            <field name="job_account" domain="[('is_job_code', '=', True)]"
                                   context="{'default_is_job_code': True}"/>
                            <field name="reference"/>
                            <field name="credit_debit_narration" required="1"/>
                            <field name="date_invoice"/>
                            <field name="move_name" invisible="1"/>
                            <field name="type" invisible="1"/>
                            <field name="company_id" invisible="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Other Info">
                            <group>
                                <group>
                                    <field name="journal_id" groups="account.group_account_user" options="{'no_create': True}"
                                        attrs="{'readonly':[('move_name','!=',False)]}"/>
                                    <field domain="[('partner_id', '=', partner_id)]" name="partner_bank_id" invisible="1"/>
                                    <field name="user_id" string="Responsible"/>
                                    <field domain="[('company_id', '=', company_id), ('internal_type', '=', 'payable'), ('deprecated', '=', False)]"
                                name="account_id" groups="account.group_account_manager"/>
                                    <field name="name" invisible="1"/>
                                    <field name="payment_term_id" options="{'no_create': True}" attrs="{'invisible': [('payment_term_id','=',False)]}"/>
                                </group>
                                <group>
                                    <field name="fiscal_position_id" options="{'no_create': True}" placeholder="Auto-detect"/>
                                    <field name="move_id" groups="account.group_account_manager" attrs="{'invisible': [('move_id', '=', False)]}"/>
                                    <field name="date" domain="[('state', '=', 'draft'), ('company_id', '=', company_id)]" groups="account.group_account_user"/>
                                    <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                                </group>
                            </group>
                        </page>
                        <page string="Bill"  invisible="1">
                            <field context="{'type': type, 'journal_id': journal_id}" name="invoice_line_ids"  invisible="1">
                                <tree string="Bill lines" editable="bottom">
                                    <field name="sequence" widget="handle" />
                                    <field name="product_id"
                                        context="{'partner_id': parent.partner_id}"/>
                                    <field name="name"/>
                                    <field name="company_id" invisible="1"/>
                                    <field name="account_id" groups="account.group_account_user"
                                        domain="[('company_id', '=', parent.company_id), ('internal_type', '=', 'other'), ('deprecated', '=', False)]"/>
                                    <field name="account_analytic_id" groups="analytic.group_analytic_accounting"
                                        domain="[('company_id', '=', parent.company_id)]"/>
                                    <field name="analytic_tag_ids" groups="analytic.group_analytic_accounting" widget="many2many_tags"/>
                                    <field name="quantity"/>
                                    <field name="uom_id" groups="product.group_uom"/>
                                    <field name="price_unit"/>
                                    <field name="discount" groups="base.group_no_one"/>
                                    <field name="invoice_line_tax_ids" widget="many2many_tags" context="{'type':parent.type}"
                                        domain="[('type_tax_use','=','purchase'),('company_id', '=', parent.company_id)]" options="{'no_create': True}"/>
                                    <field name="price_subtotal"/>
                                    <field name="currency_id" invisible="1"/>
                                </tree>
                            </field>
                            <group>
                                <group>
                                    <div class="oe_inline">
                                        <field name="tax_line_ids">
                                            <tree editable="bottom" string="Taxes">
                                                <field name="name"/>
                                                <!--Need invisible fields for on_change to create all necessary info -->
                                                <field name="tax_id" invisible="1"/>
                                                <field name="sequence" invisible="1"/>
                                                <field name="manual" invisible="1"/>
                                                <field name="account_id" groups="account.group_account_invoice"/>
                                                <field name="account_analytic_id" domain="[('company_id', '=', parent.company_id)]" groups="analytic.group_analytic_accounting"/>
                                                <field name="amount"/>
                                                <field name="currency_id" invisible="1"/>
                                            </tree>
                                        </field>
                                    </div>
                                </group>
                                <group class="oe_subtotal_footer oe_right">
                                    <field name="amount_untaxed"/>
                                    <field name="amount_tax"/>
                                    <field name="amount_total" class="oe_subtotal_footer_separator"/>
                                    <field name="payments_widget" colspan="2" nolabel="1" widget="payment"/>
                                    <field name="residual" class="oe_subtotal_footer_separator" attrs="{'invisible': [('state', '=', 'draft')]}"/>
                                    <field name="reconciled" invisible="1"/>
                                    <field name="outstanding_credits_debits_widget" colspan="2" nolabel="1" widget="payment" attrs="{'invisible': [('state', 'not in', 'open')]}"/>
                                </group>
                            </group>
                            <div>
                                <field name="comment" placeholder="Additional notes..."/>
                            </div>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="invoice_customer_credit_form" model="ir.ui.view">
        <field name="name">account.invoice.customer.form.credit</field>
        <field name="model">account.invoice</field>
        <field name="priority">20</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="action_invoice_open" type="object" states="draft,proforma2" string="Validate" class="oe_highlight" groups="account.group_account_invoice"/>
                    <!--<button name="%(account.action_account_invoice_payment)d" type="action" states="open" string="Register Payment" groups="account.group_account_invoice" class="oe_highlight"/>-->
                    <field name="state" widget="statusbar" invisible="1" />
                </header>
                <sheet>
                    <group>
                        <group>
                            <field string="Customer" name="partner_id"
                                context="{'search_default_customer':1, 'show_address': 1}"
                                options='{"always_reload": True}'
                                domain="[('customer', '=', True)]"/>
                            <field name="cost_center_id" domain="[('tag_type', '=', 'cost_center')]" context="{'default_tag_type': 'cost_center'}">
                                <form>
                                    <group col="4">
                                        <field name="name"/>
                                        <field name="code"/>
                                    </group>
                                </form>
                            </field>
                            <field name="credit_debit_account"  required="1" domain="[('company_id', '=', company_id),('internal_type','=','other')]"/>
                            <field name="credit_debit_amount"  required="1"/>
                            <field name="credit_debit_tax_ids" widget="many2many_tags"
                                   domain="[('type_tax_use','=','sale'),('company_id', '=', company_id)]" options="{'no_create': True}"/>
                            <field name="credit_debit_type" invisible="1"/>
                        </group>
                        <group>
                            <field name="job_account" domain="[('is_job_code', '=', True)]"
                                   context="{'default_is_job_code': True}"/>
                            <field name="reference"/>
                            <field name="credit_debit_narration" required="1"/>
                            <field name="date_invoice"/>
                            <field name="move_name" invisible="1"/>
                            <field name="type" invisible="1"/>
                            <field name="company_id" invisible="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Other Info" name="other_info">
                            <group>
                                <group>
                                    <field name="fiscal_position_id" options="{'no_create': True}" />
                                    <field name="journal_id" groups="account.group_account_user"
                                        options="{'no_create': True}" attrs="{'readonly':[('move_name','!=',False)]}"/>
                                    <field domain="[('company_id', '=', company_id),('internal_type','=', 'receivable'), ('deprecated', '=', False)]"
                                        name="account_id" groups="account.group_account_manager"/>
                                    <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                                    <field domain="[('partner_id.ref_company_ids', 'in', [company_id])]" name="partner_bank_id" invisible="1"/>
                                    <field name="date_due" groups="base.group_no_one"/>
                                </group>
                                <group>
                                    <field name="move_id" groups="account.group_account_manager" attrs="{'invisible': [('move_id', '=', False)]}"/>
                                    <field name="origin" groups="base.group_user" attrs="{'invisible': [('origin', '=', False)]}"/>
                                    <field name="name"/>
                                </group>
                            </group>
                            <field name="tax_line_ids">
                                <tree editable="bottom" string="Taxes" create="0">
                                    <field name="name"/>
                                    <!--Need invisible fields for on_change to create all necessary info -->
                                    <field name="tax_id" invisible="1"/>
                                    <field name="account_analytic_id" invisible="1"/>
                                    <field name="sequence" invisible="1"/>
                                    <field name="manual" invisible="1"/>
                                    <field name="account_id" groups="account.group_account_user"/>
                                    <field name="amount"/>
                                    <field name="currency_id" invisible="1"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Invoice Lines" invisible="1">
                            <field name="invoice_line_ids" nolabel="1" widget="one2many_list" mode="tree,kanban" context="{'type': type, 'journal_id': journal_id, 'default_invoice_id': id}">
                                <tree string="Invoice Lines" editable="bottom">
                                    <field name="sequence" widget="handle"/>
                                    <field name="product_id"/>
                                    <field name="origin" invisible="1"/>
                                    <field name="name"/>
                                    <field name="company_id" invisible="1"/>
                                    <field name="account_id" groups="account.group_account_user"
                                        domain="[('company_id', '=', parent.company_id), ('internal_type', '=', 'other')]"/>
                                    <field name="account_analytic_id" groups="analytic.group_analytic_accounting"
                                        domain="[('company_id', '=', parent.company_id)]"/>
                                    <field name="analytic_tag_ids" groups="analytic.group_analytic_accounting" widget="many2many_tags"/>
                                    <field name="quantity"/>
                                    <field name="uom_id" groups="product.group_uom"/>
                                    <field name="price_unit"/>
                                    <field name="discount" groups="base.group_no_one"/>
                                    <field name="invoice_line_tax_ids" widget="many2many_tags" context="{'type':parent.type}"
                                        domain="[('type_tax_use','=','sale'),('company_id', '=', parent.company_id)]" options="{'no_create': True}"/>
                                    <field name="price_subtotal"/>
                                    <field name="currency_id" invisible="1"/>
                                </tree>
                                <kanban class="o_kanban_mobile">
                                    <field name="product_id"/>
                                    <field name="price_subtotal"/>
                                    <field name="quantity"/>
                                    <field name="uom_id" groups="product.group_uom"/>
                                    <templates>
                                        <t t-name="kanban-box">
                                            <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <strong><span><t t-esc="record.product_id.value or 'None'"/></span></strong>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-8 text-muted">
                                                        <span><t t-esc="record.quantity.value"/> <t t-esc="record.uom_id.value"/></span>
                                                    </div>
                                                    <div class="col-xs-4 text-muted">
                                                        <span class="text-right"><t t-esc="record.price_subtotal.value"/></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </t>
                                    </templates>
                                </kanban>
                            </field>
                            <group class="oe_subtotal_footer oe_right">
                                <field name="amount_untaxed"/>
                                <field name="amount_tax"/>
                                <field name="amount_total" class="oe_subtotal_footer_separator"/>
                                <field name="payments_widget" colspan="2" nolabel="1" widget="payment"/>
                                <field name="residual" class="oe_subtotal_footer_separator" attrs="{'invisible': [('state', '=', 'draft')]}"/>
                                <field name="reconciled" invisible="1"/>
                                <field name="outstanding_credits_debits_widget" colspan="2" nolabel="1" widget="payment" attrs="{'invisible': [('state', 'not in', 'open')]}"/>
                            </group>
                            <field name="comment" placeholder="Terms and conditions..."/>
                        </page>

                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="account_invoice_debit_action" model="ir.actions.act_window">
        <field name="name">Debit Note</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">account.invoice</field>
        <field name="view_mode">tree,form</field>
        <field name="view_ids"
               eval="[(5, 0, 0),
                      (0, 0, {'view_mode': 'tree', 'view_id': ref('account.invoice_supplier_tree')}),
                      (0, 0, {'view_mode': 'form', 'view_id': ref('invoice_supplier_debit_form')}),]"/>
        <field name="context" eval="{'default_type': 'in_invoice', 'type': 'in_invoice', 'journal_type': 'purchase','default_credit_debit_type': 'debit'}"/>
        <field name="domain" eval="[('credit_debit_type', '=', 'debit')]"/>
    </record>

    <record id="account_invoice_credit_action" model="ir.actions.act_window">
        <field name="name">Credit Note</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">account.invoice</field>
        <field name="view_mode">tree,form</field>
        <field name="view_ids"
               eval="[(5, 0, 0),
                      (0, 0, {'view_mode': 'tree', 'view_id': ref('account.invoice_tree')}),
                      (0, 0, {'view_mode': 'form', 'view_id': ref('invoice_customer_credit_form')}),]"/>
        <field name="context" eval="{'default_credit_debit_type': 'credit'}"/>
        <field name="domain" eval="[('credit_debit_type', '=', 'credit')]"/>
    </record>

    <record id="account.action_invoice_tree1" model="ir.actions.act_window">
        <field name="name">Customer Invoices</field>
        <field name="res_model">account.invoice</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,kanban,form,calendar,pivot,graph</field>
        <field eval="False" name="view_id"/>
        <field name="domain">[('type','in',('out_invoice', 'out_refund')),('credit_debit_type', 'not in', ('credit', 'debit'))]</field>
        <field name="context">{'type':'out_invoice', 'journal_type': 'sale'}</field>
        <field name="search_view_id" ref="account.view_account_invoice_filter"/>
        <field name="help" type="html">
          <p class="oe_view_nocontent_create">
            Click to create a customer invoice.
          </p><p>
            Odoo's electronic invoicing allows to ease and fasten the
            collection of customer payments. Your customer receives the
            invoice by email and he can pay online and/or import it
            in his own system.
          </p><p>
            The discussions with your customer are automatically displayed at
            the bottom of each invoice.
          </p>
        </field>
    </record>

    <record id="account.action_invoice_tree2" model="ir.actions.act_window">
        <field name="name">Vendor Bills</field>
        <field name="res_model">account.invoice</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,kanban,form,calendar,pivot,graph</field>
        <field eval="False" name="view_id"/>
        <field name="domain">[('type','in',('in_invoice', 'in_refund')),('credit_debit_type', 'not in', ('credit', 'debit'))]</field>
        <field name="context">{'default_type': 'in_invoice', 'type': 'in_invoice', 'journal_type': 'purchase'}</field>
        <field name="search_view_id" ref="account.view_account_invoice_filter"/>
        <field name="help" type="html">
          <p class="oe_view_nocontent_create">
            Click to record a new vendor bill.
          </p><p>
            You can control the invoice from your vendor according to
            what you purchased or received.
          </p>
        </field>
    </record>

    <menuitem id="menu_supplier_debit_note"
              name="Debit Note"
              parent="account_voucher_ft.menu_accounting_vouchers"
              action="account_invoice_debit_action" sequence=""/>
    <menuitem id="menu_customer_credit_note"
              name="Credit Note"
              parent="account_voucher_ft.menu_accounting_vouchers"
              action="account_invoice_credit_action" sequence=""/>


    <record id="shipping_invoice_supplier_form" model="ir.ui.view">
        <field name="name">shipping.account.invoice.form</field>
        <field name="model">account.invoice</field>
        <field name="priority">40</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="action_invoice_open" type="object" states="draft,proforma2" string="Validate" class="oe_highlight" groups="account.group_account_invoice"/>
                    <button name="%(account.action_account_invoice_payment)d" type="action" states="open" string="Register Payment" groups="account.group_account_invoice" class="oe_highlight"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,open,paid" />
                </header>
                <sheet>
                    <group>
                        <group>
                            <field string="Carrier" name="partner_id"
                                   context="{'default_customer': 0, 'search_default_supplier': 1, 'default_supplier': 1}"
                                   domain="[('supplier', '=', True)]"/>
                            <field name="reference" string="Reference"/>
                            <field name="shipping_quotations" attrs="{'invisible': [('is_shipping_invoice', '=', False)]}"
                                   widget="many2many_tags" domain="[('carrier_id', '=', partner_id), ('state', '=', 'order')]"
                                   options="{'no_create': True,}"/>
                            <field name="is_shipping_invoice" invisible="1"/>
                        </group>
                        <group>
                            <field name="date_invoice" string="Invoice Date"/>
                            <field name="date_due"/>
                            <field name="move_name" invisible="1"/>
                            <field name="type" invisible="1"/>
                            <field name="company_id" invisible="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Quotations">
                            <field context="{'type': type, 'journal_id': journal_id}" name="invoice_line_ids">
                                <tree string="Bill lines" edit="false" create="false" delete="false">
                                    <field name="sequence" widget="handle" />
                                    <field name="name"/>
                                    <field name="company_id" invisible="1"/>
                                    <field name="account_id" groups="account.group_account_user"
                                        domain="[('company_id', '=', parent.company_id), ('internal_type', '=', 'other'), ('deprecated', '=', False)]"/>
                                    <field name="account_analytic_id" groups="analytic.group_analytic_accounting"
                                        domain="[('company_id', '=', parent.company_id)]" string="Job No."/>
                                    <field name="analytic_tag_ids" groups="analytic.group_analytic_accounting"
                                           widget="many2many_tags" string="Cost Center"/>
                                    <field name="shipping_quotation_id" invisible="1"/>
                                    <field name="quantity" invisible="1"/>
                                    <field name="uom_id" groups="product.group_uom" invisible="1"/>
                                    <field name="price_unit"/>
                                    <field name="discount" groups="base.group_no_one"/>
                                    <field name="invoice_line_tax_ids" widget="many2many_tags" context="{'type':parent.type}"
                                        domain="[('type_tax_use','=','purchase'),('company_id', '=', parent.company_id)]" options="{'no_create': True}"/>
                                    <field name="price_subtotal"/>
                                    <field name="currency_id" invisible="1"/>
                                </tree>
                            </field>
                            <group>
                                <group>
                                    <div class="oe_inline">
                                        <field name="tax_line_ids">
                                            <tree editable="bottom" string="Taxes">
                                                <field name="name"/>
                                                <!--Need invisible fields for on_change to create all necessary info -->
                                                <field name="tax_id" invisible="1"/>
                                                <field name="sequence" invisible="1"/>
                                                <field name="manual" invisible="1"/>
                                                <field name="account_id" groups="account.group_account_invoice"/>
                                                <field name="account_analytic_id" domain="[('company_id', '=', parent.company_id)]" groups="analytic.group_analytic_accounting"/>
                                                <field name="amount"/>
                                                <field name="currency_id" invisible="1"/>
                                            </tree>
                                        </field>
                                    </div>
                                </group>
                                <group class="oe_subtotal_footer oe_right">
                                    <field name="amount_untaxed"/>
                                    <field name="amount_tax"/>
                                    <field name="amount_total" class="oe_subtotal_footer_separator"/>
                                    <field name="payments_widget" colspan="2" nolabel="1" widget="payment"/>
                                    <field name="residual" class="oe_subtotal_footer_separator" attrs="{'invisible': [('state', '=', 'draft')]}"/>
                                    <field name="reconciled" invisible="1"/>
                                    <field name="outstanding_credits_debits_widget" colspan="2" nolabel="1" widget="payment" attrs="{'invisible': [('state', 'not in', 'open')]}"/>
                                </group>
                            </group>
                            <div>
                                <field name="comment" placeholder="Additional notes..."/>
                            </div>
                        </page>
                        <page string="Other Info">
                            <group>
                                <group>
                                    <field name="journal_id" groups="account.group_account_user" options="{'no_create': True}"
                                        attrs="{'readonly':[('move_name','!=',False)]}"/>
                                    <field domain="[('partner_id', '=', partner_id)]" name="partner_bank_id" invisible="1"/>
                                    <field name="user_id" string="Responsible"/>
                                    <field domain="[('company_id', '=', company_id), ('internal_type', '=', 'payable'), ('deprecated', '=', False)]"
                                name="account_id" groups="account.group_account_manager"/>
                                    <field name="name" invisible="1"/>
                                    <field name="payment_term_id" options="{'no_create': True}" attrs="{'invisible': [('payment_term_id','=',False)]}"/>
                                </group>
                                <group>
                                    <field name="fiscal_position_id" options="{'no_create': True}" placeholder="Auto-detect"/>
                                    <field name="move_id" groups="account.group_account_manager" attrs="{'invisible': [('move_id', '=', False)]}"/>
                                    <field name="date" domain="[('state', '=', 'draft'), ('company_id', '=', company_id)]" groups="account.group_account_user"/>
                                    <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="shipping_invoice_view_tree" model="ir.ui.view">
        <field name="name">shipping.invoice.view.tree</field>
        <field name="model">account.invoice</field>
        <field name="priority">40</field>
        <field name="arch" type="xml">
            <tree string="Shipping Invoice">
                <field name="partner_id" groups="base.group_user" string="Carrier"/>
                <field name="date_invoice" string="Invoice Date"/>
                <field name="number"/>
                <field name="commercial_partner_id" invisible="1"/>
                <field name="name" invisible="1"/>
                <field name="journal_id" invisible="1"/>
                <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}"/>
                <field name="date_due"/>
                <field name="amount_total_signed" string="Total" sum="Total"/>
                <field name="residual_signed" string="To Pay" sum="To pay"/>
                <field name="currency_id" invisible="1"/>
                <field name="company_currency_id" invisible="1"/>
                <field name="state"/>
                <field name="type" invisible="context.get('type',True)"/>
            </tree>
        </field>
    </record>

    <record id="shipment_invoice_action" model="ir.actions.act_window">
        <field name="name">Shipment Invoice</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">account.invoice</field>
        <field name="view_mode">tree,form</field>
        <field name="view_ids"
               eval="[(5, 0, 0),
                      (0, 0, {'view_mode': 'tree', 'view_id': ref('hatta_trading.shipping_invoice_view_tree')}),
                      (0, 0, {'view_mode': 'form', 'view_id': ref('hatta_trading.shipping_invoice_supplier_form')}),]"/>
        <field name="context" eval="{'default_type': 'in_invoice', 'type': 'in_invoice', 'journal_type': 'purchase'}"/>
        <field name="domain" eval="[('is_shipping_invoice', '=', True)]"/>
    </record>

    <menuitem id="hatta_shipping_invoice_menu_id"
              name="Shipping Invoice"
              action="shipment_invoice_action"
              parent="account.menu_finance_payables"
              sequence="2"/>
</odoo>
